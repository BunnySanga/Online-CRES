╔════════════════════════════════════════════════════════════════╗
║         LAST LOGIN FEATURE - QUICK START GUIDE                 ║
╚════════════════════════════════════════════════════════════════╝

📋 **STEP 1: Run Database Migration**
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Open your MySQL client and run:

    ALTER TABLE Admin 
    ADD COLUMN last_login_at DATETIME DEFAULT NULL 
    AFTER password_hash;

Or use command line:
    cd backend
    mysql -u root -p your_database < migrations/add_last_login_tracking.sql


📋 **STEP 2: Restart Backend Server**
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

    cd backend
    npm restart
    
    # Or if using nodemon:
    # It should auto-restart


📋 **STEP 3: Test the Feature**
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Admin Test:
    1. Go to http://localhost:5173/admin/login
    2. Login with admin credentials
    3. Look for toast notification at TOP-RIGHT corner
    4. Should show: "🔐 Last Login [date/time]"

Student Test:
    1. Go to http://localhost:5173/student/login
    2. Login with student credentials
    3. Enter OTP from email
    4. Look for toast notification at TOP-RIGHT corner


📋 **EXPECTED BEHAVIOR**
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✓ First login: NO toast (last_login_at is NULL)
✓ Second+ login: Toast appears with previous login time
✓ Toast auto-dismisses after 5 seconds
✓ Toast can be closed manually with X button
✓ Toast only shows ONCE per login session


📋 **VERIFY DATABASE**
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Check if column was added:

    DESCRIBE Admin;
    
    -- Should show:
    -- last_login_at | datetime | YES |  | NULL


📋 **VERIFY BACKEND RESPONSE**
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Open browser DevTools (F12) → Network tab

Admin Login Response should include:
    {
      "token": "...",
      "admin": {...},
      "last_login_at": "2025-10-21T18:30:00.000Z"  ← CHECK THIS
    }

Student OTP Response should include:
    {
      "token": "...",
      "role": "STUDENT",
      "last_login_at": "2025-10-21T14:15:00.000Z"  ← CHECK THIS
    }


📋 **FILES MODIFIED**
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Backend:
  ✅ backend/controllers/authController.js (adminLogin, verifyOtp)
  ✅ backend/migrations/add_last_login_tracking.sql (NEW)

Frontend:
  ✅ src/context/AuthContext.jsx
  ✅ src/components/ui/ToastProvider.jsx
  ✅ src/pages/admin/Dashboard.jsx
  ✅ src/pages/student/StudentDashboard.jsx
  ✅ src/pages/auth/AdminLogin.jsx
  ✅ src/pages/auth/VerifyOtp.jsx
  ✅ src/utils/formatLastLogin.js (NEW)
  ✅ src/index.css


📋 **TROUBLESHOOTING**
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

❌ Toast not showing:
    → Check browser console for errors
    → Verify backend response has 'last_login_at'
    → Check localStorage: console.log(localStorage.getItem('lastLoginAt'))

❌ Column error:
    → Run: ALTER TABLE Admin ADD COLUMN last_login_at DATETIME DEFAULT NULL;

❌ Toast appears on every page:
    → Clear: localStorage.removeItem('lastLoginAt')
    → Check dashboard cleanup logic


📋 **THAT'S IT!**
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

The feature is ready to use! 🎉

For detailed docs, see: SETUP_LAST_LOGIN.md
For implementation details, see: LAST_LOGIN_FEATURE.md
